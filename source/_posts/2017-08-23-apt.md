---
title: apt 使用
tags:
  - apt
categories:
  - 命令行工具
date: 2017-08-23 14:48:10
---



## apt-get

```bash
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install -y redis-server
sudo apt-get install -y python-software-properties
sudo apt-get remove redis-server
sudo apt-get autoremove
```

## dpkg-reconfigure

重新配置已经安装过的软件包

```bash
sudo dpkg-reconfigure locales
```

## add-apt-repository

add-apt-repository is a script for **adding apt sources.list entries**.

```bash
sudo add-apt-repository -y ppa:xxx/xxx
sudo add-apt-repository --remove ppa:xxx/xxx
```

可用选项

option | 描述
--|--
-h --help | 显示帮助信息
-m --massive-debug | 会显示一堆debug信息
-r --remove | 把 sources.list.d 目录中的 repository 删除
-k --keyserver | keyserver
-y | yes
-s --enable-source | 下载包源码
-u --update | 添加后更新包缓存

## apt-key

用法

```bash
apt-key [--keyring file] [command] [arguments]
```

> 如果没有提供 `keyring` 文件，则命令将应用在所有的 `keyring` 文件

Manage apt's list of trusted keys

```bash
apt-key add <file>          - add the key contained in <file> '-' 表示标准输入
apt-key del <keyid>         - remove the key <keyid>
apt-key export <keyid>      - output the key <keyid>
apt-key exportall           - 导出本地 trusted 数据库中的所有 key
apt-key update              - 通过 keyring package 更新 key
apt-key net-update          - 通过网络更新 key
apt-key list                - 列出所有 key
apt-key finger              - 列出所有验证指纹
apt-key adv                 - 高级配置
```

示例

下载并添加 virtualbox 的 key

```bash
wget -q http://download.virtualbox.org/virtualbox/debian/oracle_vbox.asc -O- | sudo apt-key add -
```

## sources.list

记录软件包仓库位置的配置文件 `/etc/apt/sources.list` `/etc/apt/sources.list.d/*`

```
deb http://security.ubuntu.com/ubuntu xenial-security main restricted
deb-src http://security.ubuntu.com/ubuntu xenial-security main restricted
```

档案类型 - 仓库地址 - 发行版 - 软件包分类

### 档案类型

- deb 二进制编译软件包
- deb-src 用于编译二进制软件包的源码

### 仓库地址

我们可以更换为其他镜像源地址来提高下载速度

### 发行版

有多种分类方法：

- 发行版的具体代号 `xenial` `trusty` `precise`
- 发行版的发行类型 `oldstable` `stable` `testing` `unstable`
- 发行版后进一步指定 `xenial-security` `trusty-security`

### 软件包分类

Ubuntu 对软件包的分类可以用下表来表示

-|自有软件|非自由软件
--|--|--
官方支持的|Main|Restricted
非官方支持的|Universe|Multiverse

